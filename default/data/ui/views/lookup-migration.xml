<form version="1.1" theme="dark">
  <label>Lookup Migration</label>
  <description>Migrate lookup table files between Splunk instances.</description>

  <fieldset submitButton="true"> <!-- Changed to true for explicit submit -->
    <!-- HTML INSTRUCTIONS FOR LOOKUP MIGRATION -->
      <html>
          <div style="background-color: #2a2a2a; border-radius: 5px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">
            <h3 style="font-size: 1.2em; color: #F0F0F0; margin-top: 0; margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 5px;">Dashboard Fields:</h3>
            <ul style="list-style-type: disc; margin-left: 25px; padding-left: 0; color: #D0D0D0;">
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Source Host / Destination Host:</strong><br/>
                Enter the full hostname or IP address of the Splunk instance.<br/>
                Example: <code style="font-family: monospace; background-color: #333; padding: 2px 4px; border-radius: 3px; color: #65A637;">your-splunk-host</code>
              </li>
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Source Token / Destination Token:</strong><br/>
                Provide the Splunk authentication token for the respective instance.<br/>
                (Note: Username/Password options are also available for the underlying command).
              </li>
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Source App:</strong><br/>
                Specify the name of the Splunk app on the source instance where the lookups reside.
              </li>
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Lookup Name:</strong><br/>
                By default, this dashboard migrates "all" CSV lookups. The underlying command also supports specifying a single lookup file name (e.g., <code style="font-family: monospace; background-color: #333; padding: 2px 4px; border-radius: 3px; color: #65A637;">my_lookup.csv</code>).
              </li>
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Overwrite Existing:</strong><br/>
                Select "Yes" to overwrite lookups on the destination if they already exist.<br/>
                Select "No" to skip lookups that already exist on the destination.
              </li>
            </ul>
        </div>
      </html>

    <!-- INPUT FIELDS -->
    <input type="text" token="srcHost" id="srcHostInput">
      <label>Source Host</label>
      <default>localhost</default>
    </input>
    <input type="text" token="srcToken" id="srcTokenInput">
      <label>Source Token</label>
      <default>YOUR_SOURCE_TOKEN</default>
    </input>
    <input type="text" token="destHost" id="destHostInput">
      <label>Destination Host</label>
      <default>localhost</default>
    </input>
    <input type="text" token="destToken" id="destTokenInput">
      <label>Destination Token</label>
      <default>YOUR_DESTINATION_TOKEN</default>
    </input>
    <input type="text" token="srcApp" id="srcAppInput">
      <label>Source App</label>
      <default>search</default>
    </input>
    <input type="radio" token="overWrite" id="overWriteInput">
      <label>Overwrite Existing</label>
      <choice value="enable_overwrite_existing=true">Yes</choice>
      <choice value="">No</choice>
      <default></default> <!-- Default to No (empty string) -->
    </input>
  </fieldset>
  <row>
    <panel>
      <title>Migration Results</title>
      <table>
        <search>
          <query>
          
            | lookupmigrator src_host="$srcHost$" src_port=8089 src_token="$srcToken$" dst_host="$destHost$" src_app="$srcApp$" dst_port=8089 dst_token="$destToken$" lookup_name="all" $overWrite$ | reverse
          
          </query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <done>
            <!-- Update tokens after submit -->
            <set token="form.srcHost">$srcHost$</set>
            <set token="form.srcToken">$srcToken$</set>
            <set token="form.destHost">$destHost$</set>
            <set token="form.destToken">$destToken$</set>
            <set token="form.srcApp">$srcApp$</set>
            <set token="form.overWrite">$overWrite$</set>
          </done>
        </search>
        <option name="count">100</option>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option> <!-- Progress bar for search -->
        <option name="rowNumbers">true</option> <!-- Show row numbers -->
      </table>
    </panel>
  </row>
</form>