<form version="1.1" theme="dark">
  <label>Role Migration</label>
  <description>Migrate user roles between Splunk instances.</description>
  <fieldset submitButton="true"> <!-- Changed to true for explicit submit -->
    <!-- HTML INSTRUCTIONS FOR ROLE MIGRATION -->
      <html>
          <div style="background-color: #2a2a2a; border-radius: 5px; padding: 15px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">
            <h3 style="font-size: 1.2em; color: #F0F0F0; margin-top: 0; margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 5px;">Dashboard Fields:</h3>
            <ul style="list-style-type: disc; margin-left: 25px; padding-left: 0; color: #D0D0D0;">
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Source Host / Destination Host:</strong><br/>
                Enter the full URL of the Splunk instance, including the port.<br/>
                Example: <code style="font-family: monospace; background-color: #333; padding: 2px 4px; border-radius: 3px; color: #65A637;">https://your-splunk-host:8089</code>
              </li>
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Source Token / Destination Token:</strong><br/>
                Provide the Splunk authentication token for the respective instance.<br/>
                Alternatively, fields for Username and Password may be available for authentication.
              </li>
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Update If Exists:</strong><br/>
                Select "True" to update a role on the destination if it already exists.<br/>
                Select "False" to skip roles that already exist on the destination.
              </li>
              <li style="margin-bottom: 8px;">
                <strong style="color: #65A637;">Migrate All Roles / Specific Roles:</strong><br/>
                Choose to migrate all roles found on the source, or provide a comma-separated list of specific role names to transfer.
              </li>
            </ul>
        </div>
      </html>

    <!-- INPUT FIELDS -->
    <input type="text" token="srcHost" id="srcHostInput">
      <label>Source Host</label>
      <default>https://localhost:8089</default>
    </input>
    <input type="text" token="destHost" id="destHostInput">
      <label>Destination Host</label>
      <default>https://localhost:8089</default>
    </input>
    <input type="text" token="srcToken" id="srcTokenInput">
      <label>Source Token</label>
      <default>YOUR_SOURCE_TOKEN</default>
    </input>
    <input type="text" token="destToken" id="destTokenInput">
      <label>Destination Token</label>
      <default>YOUR_DESTINATION_TOKEN</default>
    </input>
    <input type="radio" token="updateExists" id="updateExistsInput">
      <label>Update If Exists</label>
      <choice value="enable_update_if_exists=true">True</choice>
      <choice value="">False</choice>
      <default></default> <!-- Default to False (empty string) -->
    </input>
  </fieldset>
  <row>
    <panel>
      <title>Migration Results</title>
      <table>
        <search>
          <query>
            | rolemigrator srcHost="$srcHost$" destHost="$destHost$" source_token="$srcToken$" destination_token="$destToken$" enable_all=true $updateExists$ | reverse
          </query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <done>
            <!-- Update tokens after submit -->
            <set token="form.srcHost">$srcHost$</set>
            <set token="form.destHost">$destHost$</set>
            <set token="form.srcToken">$srcToken$</set>
            <set token="form.destToken">$destToken$</set>
            <set token="form.updateExists">$updateExists$</set>
          </done>
        </search>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">true</option> <!-- Show row numbers -->
      </table>
    </panel>
  </row>
</form>